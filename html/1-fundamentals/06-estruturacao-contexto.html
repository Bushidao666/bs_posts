<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ï¿½ EstruturaÃ§Ã£o de Contexto: A Arte de Fornecer a InformaÃ§Ã£o Certa</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <div id="kb-guide-wrapper" style="all: initial; * { all: unset; }">
        <style>
            #kb-guide-wrapper {
                --color-bg: #000000;
                --color-surface: #0a0a0a;
                --color-surface-elevated: #111111;
                --color-border: #1a1a1a;
                --color-text: #ffffff;
                --color-text-secondary: #a3a3a3;
                --color-text-tertiary: #737373;
                --color-magenta: #ff0080;
                --color-magenta-dim: #8b0046;
                --color-gold: #ffd700;
                --color-gold-dim: #8b7500;
                --color-success: #00ff88;
                --color-error: #ff3366;

                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                background: var(--color-bg);
                color: var(--color-text);
                line-height: 1.7;
                font-size: 16px;
            }

            #kb-guide-wrapper .kb-container {
                max-width: 900px;
                margin: 0 auto;
                padding: 80px 24px;
            }

            #kb-guide-wrapper .kb-header {
                margin-bottom: 64px;
                padding-bottom: 32px;
                border-bottom: 1px solid var(--color-border);
            }

            #kb-guide-wrapper .kb-title {
                font-size: 48px;
                font-weight: 800;
                line-height: 1.1;
                margin-bottom: 24px;
                background: linear-gradient(135deg, var(--color-text) 0%, var(--color-text-secondary) 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                letter-spacing: -0.02em;
            }

            #kb-guide-wrapper .kb-emoji {
                display: inline-block;
                font-size: 56px;
                margin-right: 16px;
                vertical-align: middle;
            }

            #kb-guide-wrapper .kb-lead {
                font-size: 20px;
                line-height: 1.6;
                color: var(--color-text-secondary);
                margin-top: 16px;
            }

            #kb-guide-wrapper h2 {
                font-size: 36px;
                font-weight: 700;
                margin: 64px 0 24px 0;
                letter-spacing: -0.01em;
                color: var(--color-text);
            }

            #kb-guide-wrapper h3 {
                font-size: 24px;
                font-weight: 600;
                margin: 48px 0 16px 0;
                color: var(--color-text);
                display: flex;
                align-items: center;
                gap: 12px;
            }

            #kb-guide-wrapper h3::before {
                content: '';
                width: 4px;
                height: 24px;
                background: linear-gradient(180deg, var(--color-magenta) 0%, var(--color-magenta-dim) 100%);
                border-radius: 2px;
            }

            #kb-guide-wrapper p {
                margin: 16px 0;
                color: var(--color-text-secondary);
                font-size: 17px;
            }

            #kb-guide-wrapper strong {
                color: var(--color-text);
                font-weight: 600;
            }

            #kb-guide-wrapper ul, #kb-guide-wrapper ol {
                margin: 16px 0;
                padding-left: 24px;
                color: var(--color-text-secondary);
            }

            #kb-guide-wrapper li {
                margin: 8px 0;
                padding-left: 8px;
            }

            #kb-guide-wrapper .kb-code-block {
                background: var(--color-surface);
                border: 1px solid var(--color-border);
                border-radius: 8px;
                padding: 20px;
                margin: 20px 0;
                overflow-x: auto;
                font-family: 'Fira Code', 'Courier New', monospace;
                font-size: 14px;
                line-height: 1.6;
                color: var(--color-text-secondary);
            }

            #kb-guide-wrapper .kb-code-block code {
                color: var(--color-text-secondary);
                white-space: pre-wrap;
                word-wrap: break-word;
            }

            #kb-guide-wrapper .kb-inline-code {
                background: var(--color-surface-elevated);
                color: var(--color-magenta);
                padding: 2px 8px;
                border-radius: 4px;
                font-family: 'Fira Code', monospace;
                font-size: 14px;
            }

            #kb-guide-wrapper .kb-footer {
                margin-top: 80px;
                padding-top: 32px;
                border-top: 1px solid var(--color-border);
            }

            #kb-guide-wrapper .kb-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                margin-top: 24px;
            }

            #kb-guide-wrapper .kb-tag {
                background: var(--color-surface-elevated);
                color: var(--color-text-secondary);
                padding: 6px 12px;
                border-radius: 6px;
                font-size: 13px;
                border: 1px solid var(--color-border);
            }

            #kb-guide-wrapper .mermaid {
                background: var(--color-surface-elevated);
                border: 1px solid var(--color-border);
                border-radius: 12px;
                padding: 32px;
                margin: 32px 0;
            }

            @media (max-width: 768px) {
                #kb-guide-wrapper .kb-container {
                    padding: 40px 20px;
                }

                #kb-guide-wrapper .kb-title {
                    font-size: 36px;
                }

                #kb-guide-wrapper h2 {
                    font-size: 28px;
                }
            }
        </style>

        <div class="kb-container">
            <header class="kb-header">
                <h1 class="kb-title">
                    <span class="kb-emoji">ï¿½</span>
                    ï¿½ EstruturaÃ§Ã£o de Contexto: A Arte de Fornecer a InformaÃ§Ã£o Certa
                </h1>
                <p class="kb-lead">Imagine que vocÃª ligou para o suporte tÃ©cnico e disse:</p>
            </header>

            <main>
                <p>---</p>
<p>guide_id: "estruturacao-contexto"</p>
<p>version: 1.0.0</p>
<p>status: complete</p>
<p>updated: 2025-11-06</p>
<p>layer: 1-fundamentals</p>
<p>tags: [contexto, estrutura, informacao, signal-noise]</p>
<p>related_guides: ["03-contexto-e-role-playing", "05-ciclo-de-trabalho-com-ia"]</p>
<p>prerequisites: ["01-o-que-e-prompt-engineering", "03-contexto-e-role-playing"]</p>
<p>next_steps: ["07-especificacao-requisitos", "../2-engineering/01-templates-reutilizaveis"]</p>
<p>concepts_defined: ["contexto-minimo-viavel", "progressao-detalhes", "signal-to-noise", "contexto-estruturado"]</p>
<p>concepts_referenced: ["contexto", "placeholders", "role-playing"]</p>
<p>---</p>

<h1>ğŸ“‹ EstruturaÃ§Ã£o de Contexto: A Arte de Fornecer a InformaÃ§Ã£o Certa</h1>

<h2>IntroduÃ§Ã£o: O Dilema do Contexto</h2>

<p>Imagine que vocÃª ligou para o suporte tÃ©cnico e disse:</p>

<p>> <strong>OpÃ§Ã£o A:</strong> "NÃ£o funciona."</p>

<p>> <strong>OpÃ§Ã£o B:</strong> [10 minutos de histÃ³rico detalhado sobre tudo que vocÃª jÃ¡ fez no computador nos Ãºltimos 6 meses]</p>

<p>> <strong>OpÃ§Ã£o C:</strong> "NÃ£o consigo fazer login no sistema X. Navegador Chrome versÃ£o 120, erro 'invalid credentials' mesmo com senha correta, comeÃ§ou hoje apÃ³s atualizaÃ§Ã£o."</p>

<p><strong>Qual atendente conseguiria te ajudar melhor?</strong></p>

<p>Com IA Ã© a mesma coisa:</p><ul><li><strong>Contexto insuficiente</strong> â†’ Resposta genÃ©rica, inÃºtil</li><li><strong>Contexto excessivo</strong> â†’ IA se perde, foca no errado</li><li><strong>Contexto estruturado</strong> â†’ Resposta precisa, acion</li>

<p>Ã¡vel</p>

<p>Este guia ensina como fornecer <strong>contexto na medida certa, estruturado de forma eficiente</strong>.</p>

<h2>O Conceito de "Contexto MÃ­nimo ViÃ¡vel" (CMV)</h2>

<p>Inspirado em MVP (Minimum Viable Product), o CMV Ã©:</p>

<p>> <strong>A menor quantidade de contexto que permite Ã  IA gerar uma resposta Ãºtil</strong></p>

<h3>Por Que ComeÃ§ar com CMV?</h3>

<p>1. <strong>Economiza tempo</strong> - NÃ£o escrever contexto desnecessÃ¡rio</p>
<p>2. <strong>Facilita iteraÃ§Ã£o</strong> - Adicione detalhes apenas se necessÃ¡rio</p>
<p>3. <strong>Clareza</strong> - Menos ruÃ­do, mais sinal</p>
<p>4. <strong>DiagnÃ³stico</strong> - Se falhar com CMV, vocÃª sabe o que falta</p>

<h3>Template de CMV</h3>

<p>``<span class="kb-inline-code">markdown</p>
<p><strong>O QUÃŠ:</strong> [O que vocÃª quer / o que estÃ¡ quebrado] (1-2 linhas)</p>
<p><strong>STACK:</strong> [Tecnologias principais] (1 linha)</p>
<p><strong>EXEMPLO:</strong> [Um caso concreto] (cÃ³digo/dados/screenshot)</p>
<p></span>`<span class="kb-inline-code"></p>

<h3>Exemplo Comparativo</h3>

<p><strong>âŒ Contexto Insuficiente:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Como fazer autenticaÃ§Ã£o?"</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… CMV:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p><strong>O QUÃŠ:</strong> Implementar autenticaÃ§Ã£o para API REST</p>
<p><strong>STACK:</strong> Node.js + Express + PostgreSQL</p>
<p><strong>EXEMPLO:</strong> Endpoint POST /api/login que recebe {email, password}</p>
<p>e retorna JWT</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>ğŸ”§ Contexto Expandido</strong> (se CMV nÃ£o for suficiente):</p>
<p></span>`<span class="kb-inline-code"></p>
<p>[CMV acima +]</p>

<p><strong>ESCALA:</strong> 10k usuÃ¡rios, 50 logins/minuto</p>
<p><strong>SEGURANÃ‡A:</strong> Precisa atender OWASP top 10, rate limiting obrigatÃ³rio</p>
<p><strong>INFRAESTRUTURA:</strong> Rodando em AWS Lambda (stateless)</p>
<p><strong>CONSTRAINTS:</strong> NÃ£o pode usar bibliotecas GPL (licenÃ§a), JWT expira em 15min</p>
<p></span>`<span class="kb-inline-code"></p>

<p>---</p>

<h2>ProgressÃ£o de Detalhes: Do Geral ao EspecÃ­fico</h2>

<p>Pense em contexto como <strong>zoom de cÃ¢mera</strong>:</p>

<p></span>`<span class="kb-inline-code"></p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  NÃVEL 1: VisÃ£o Geral (CMV)        â”‚  â† ComeÃ§a aqui</p>
<p>â”‚  "O que, Stack, Exemplo"            â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>              â†“ (Se resposta genÃ©rica)</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  NÃVEL 2: Contexto TÃ©cnico          â”‚</p>
<p>â”‚  "Escala, Performance, Infra"       â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>              â†“ (Se ainda nÃ£o especÃ­fico)</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  NÃVEL 3: Constraints & HistÃ³rico   â”‚</p>
<p>â”‚  "LimitaÃ§Ãµes, Tentativas, DecisÃµes" â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>              â†“ (Se precisar ainda mais)</p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚  NÃVEL 4: Contexto Completo         â”‚</p>
<p>â”‚  "Stakeholders, PolÃ­tica, Legado"   â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p></span>`<span class="kb-inline-code"></p>

<h3>Quando Adicionar Cada NÃ­vel?</h3>

<p><strong>NÃVEL 1 (CMV):</strong> Sempre. Todo prompt comeÃ§a aqui.</p>

<p><strong>NÃVEL 2:</strong> Quando a resposta Ã©:</p><li>GenÃ©rica demais</li><li>Ignora aspectos de escala/performance</li><li>PropÃµe soluÃ§Ãµes que nÃ£o funcionam na sua infra</li>

<p><strong>NÃVEL 3:</strong> Quando a resposta:</p><li>Sugere algo que vocÃª jÃ¡ tentou</li><li>Ignora limitaÃ§Ãµes importantes</li><li>NÃ£o considera restriÃ§Ãµes tÃ©cnicas/legais</li>

<p><strong>NÃVEL 4:</strong> Quando a resposta:</p><li>Ignora aspectos polÃ­ticos/organizacionais</li><li>PropÃµe mudanÃ§as inviÃ¡veis (reescrever tudo)</li><li>NÃ£o considera legado/dÃ­vida tÃ©cnica</li>

<h3>Exemplo de ProgressÃ£o</h3>

<p><strong>Prompt Inicial (CMV):</strong></p>
<p></span>`<span class="kb-inline-code">markdown</p>
<p><strong>O QUÃŠ:</strong> Query de relatÃ³rio estÃ¡ lenta</p>
<p><strong>STACK:</strong> PostgreSQL 14</p>
<p><strong>EXEMPLO:</strong></p>
<p></span>`<span class="kb-inline-code">sql</p>
<p>SELECT * FROM orders WHERE created_at > '2024-01-01';</p>
<p></span>`<span class="kb-inline-code"></p>
<p>Demora 30s, timeout em 10s.</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>Resposta da IA:</strong> "Crie um Ã­ndice em </span>created_at<span class="kb-inline-code">"</p>

<p><strong>AvaliaÃ§Ã£o:</strong> SoluÃ§Ã£o genÃ©rica, nÃ£o considerou escala.</p>

<p>---</p>

<p><strong>Prompt Refinado (NÃ­vel 2):</strong></p>
<p></span>`<span class="kb-inline-code">markdown</p>
<p>[Contexto CMV +]</p>

<p><strong>ESCALA:</strong></p><li>Tabela orders: 50M registros</li><li>Crescimento: +5M/mÃªs</li><li>Carga: 100 queries simultÃ¢neas deste tipo no horÃ¡rio de pico</li>

<p><strong>INFRAESTRUTURA:</strong></p><li>PostgreSQL 14 em AWS RDS (db.r5.large)</li><li>100GB de dados, 16GB RAM, 4 vCPUs</li><li>Ãndices atuais: orders(id), orders(user_id)</li>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>Resposta da IA:</strong> SoluÃ§Ã£o mais especÃ­fica considerando volume e recursos.</p>

<p>---</p>

<p><strong>Prompt Expandido (NÃ­vel 3)</strong> (se ainda nÃ£o resolver):</p>
<p></span>`<span class="kb-inline-code">markdown</p>
<p>[Contexto NÃ­vel 2 +]</p>

<p><strong>TENTATIVAS ANTERIORES:</strong></p><li>Criamos Ã­ndice em created_at â†’ Melhorou para 15s (ainda insuficiente)</li><li>Tentamos LIMIT 1000 â†’ NÃ£o serve (precisam de todos dados)</li><li>Consideramos cache â†’ Compliance nÃ£o permite (dados sensÃ­veis)</li>

<p><strong>CONSTRAINTS:</strong></p><li>NÃ£o podemos fazer downtime para manutenÃ§Ã£o (sistema 24/7)</li><li>Budget: nÃ£o pode escalar hardware agora</li><li>Query precisa ser real-time (nÃ£o pode ser batch/async)</li>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>Resposta da IA:</strong> SoluÃ§Ã£o que considera histÃ³rico e limitaÃ§Ãµes.</p>

<p>---</p>

<h2>Signal-to-Noise Ratio: Maximizando RelevÃ¢ncia</h2>

<p><strong>Signal</strong> = InformaÃ§Ã£o relevante que ajuda a IA</p>
<p><strong>Noise</strong> = InformaÃ§Ã£o irrelevante que distrai</p>

<h3>Como Maximizar Signal</h3>

<p>#### 1. <strong>Seja EspecÃ­fico, NÃ£o Verboso</strong></p>

<p><strong>âŒ Noise:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Estou trabalhando em um projeto muito interessante de e-commerce</p>
<p>que comeÃ§ou hÃ¡ 2 anos quando a empresa decidiu entrar no mercado</p>
<p>digital. Tivemos vÃ¡rias reuniÃµes com stakeholders..."</p>
<p>[3 parÃ¡grafos de histÃ³ria]</p>
<p>"...e agora preciso otimizar uma query."</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… Signal:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p><strong>Projeto:</strong> E-commerce (2 anos em produÃ§Ã£o)</p>
<p><strong>Problema:</strong> Query de relatÃ³rio demora 30s</p>
<p><strong>Impacto:</strong> Clientes nÃ£o conseguem ver histÃ³rico de pedidos</p>
<p></span>`<span class="kb-inline-code"></p>

<p>#### 2. <strong>Use Dados Quantitativos</strong></p>

<p><strong>âŒ Vago:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"O sistema tem muitos usuÃ¡rios e estÃ¡ lento"</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… EspecÃ­fico:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Sistema tem 10k usuÃ¡rios ativos/dia, latÃªncia p95: 5s (target: <500ms)"</p>
<p></span>`<span class="kb-inline-code"></p>

<p>#### 3. <strong>Priorize InformaÃ§Ã£o AcionÃ¡vel</strong></p>

<p><strong>âŒ NÃ£o acionÃ¡vel:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"A arquitetura Ã© complexa e tem vÃ¡rios microsserviÃ§os</p>
<p>que se comunicam de formas diferentes."</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… AcionÃ¡vel:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Arquitetura: 5 microsserviÃ§os comunicando via REST + RabbitMQ.</p>
<p>Problema: Fila de orders processamento estÃ¡ acumulando (1000 msgs/min,</p>
<p>consumindo 100 msgs/min)."</p>
<p></span>`<span class="kb-inline-code"></p>

<p>#### 4. <strong>Elimine RedundÃ¢ncia</strong></p>

<p><strong>âŒ Redundante:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"O banco de dados que estamos usando Ã© PostgreSQL.</p>
<p>PostgreSQL Ã© um banco relacional. Usamos PostgreSQL versÃ£o 14."</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… Conciso:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Stack: PostgreSQL 14"</p>
<p></span>`<span class="kb-inline-code"></p>

<p>---</p>

<h2>Estruturando Contexto com Placeholders</h2>

<p>Placeholders ajudam a <strong>organizar</strong> contexto de forma consistente.</p>

<h3>Template de Estrutura</h3>

<p></span>`<span class="kb-inline-code">markdown</p>
<h2>ğŸ¯ OBJETIVO</h2>
<p>[O_QUE_VOCE_QUER]</p>

<h2>ğŸ› ï¸ STACK TÃ‰CNICO</h2><li>Backend: [LINGUAGEM_FRAMEWORK]</li><li>Database: [DB_VERSAO]</li><li>Infra: [CLOUD_PROVIDER_SERVICO]</li><li>[OUTRAS_TECNOLOGIAS_RELEVANTES]</li>

<h2>ğŸ“Š ESCALA & PERFORMANCE</h2><li>UsuÃ¡rios: [QUANTIDADE]</li><li>Carga: [REQUESTS_TRANSACOES_POR_PERIODO]</li><li>Dados: [VOLUME]</li><li>Target: [METRICAS_DESEJADAS]</li>

<h2>ğŸš§ CONSTRAINTS</h2><li>[LIMITACAO_1]</li><li>[LIMITACAO_2]</li><li>[LIMITACAO_3]</li>

<h2>ğŸ“Œ CONTEXTO ADICIONAL</h2>
<p>[HISTORICO, TENTATIVAS, DECISOES_PASSADAS]</p>

<h2>ğŸ’» CÃ“DIGO/DADOS</h2>
<p></span>`<span class="kb-inline-code">[LINGUAGEM]</p>
<p>[CODIGO_EXEMPLO_OU_DADOS]</p>
<p></span>`<span class="kb-inline-code"></p>

<h2>âœ… CRITÃ‰RIOS DE SUCESSO</h2><li>[CRITERIO_1]</li><li>[CRITERIO_2]</li><li>[CRITERIO_3]</li>
<p></span>`<span class="kb-inline-code"></p>

<h3>Exemplo Preenchido</h3>

<p></span>`<span class="kb-inline-code">markdown</p>
<h2>ğŸ¯ OBJETIVO</h2>
<p>Otimizar endpoint de checkout que estÃ¡ causando timeouts</p>

<h2>ğŸ› ï¸ STACK TÃ‰CNICO</h2><li>Backend: Node.js 18 + Express</li><li>Database: PostgreSQL 14 + Redis 7 (cache)</li><li>Infra: AWS ECS Fargate (2 vCPUs, 4GB RAM por container)</li><li>Payment: IntegraÃ§Ã£o com Stripe API</li>

<h2>ğŸ“Š ESCALA & PERFORMANCE</h2><li>UsuÃ¡rios: 50k/dia, pico de 200 usuÃ¡rios simultÃ¢neos</li><li>Carga: 500 checkouts/hora no pico</li><li>Dados: 1M pedidos, 100k usuÃ¡rios</li><li>Target: p95 < 2s (atual: 8s, timeout em 10s)</li>

<h2>ğŸš§ CONSTRAINTS</h2><li>NÃ£o pode perder transaÃ§Ã£o (dinheiro envolvido)</li><li>NÃ£o pode fazer downtime (SLA 99.9%)</li><li>IntegraÃ§Ã£o Stripe nÃ£o pode mudar (contrato)</li>

<h2>ğŸ“Œ CONTEXTO ADICIONAL</h2><li>Problema comeÃ§ou apÃ³s Black Friday (volume 5x normal)</li><li>Adicionamos cache em Redis mas nÃ£o resolveu completamente</li><li>Profiling mostra: 60% do tempo em queries, 30% em Stripe API</li>

<h2>ğŸ’» CÃ“DIGO</h2>
<p></span>`<span class="kb-inline-code">javascript</p>
<p>async function checkout(req, res) {</p>
<p>  // 1. Validar carrinho (3 queries)</p>
<p>  const cart = await db.query('SELECT * FROM cart WHERE user_id = $1', [userId]);</p>
<p>  const items = await db.query('SELECT * FROM cart_items WHERE cart_id = $1', [cart.id]);</p>
<p>  const products = await db.query('SELECT * FROM products WHERE id IN ($1)', [itemIds]);</p>

<p>  // 2. Criar pedido (5 queries em sequÃªncia)</p>
<p>  const order = await db.query('INSERT INTO orders ...');</p>
<p>  for (const item of items) {</p>
<p>    await db.query('INSERT INTO order_items ...');</p>
<p>  }</p>

<p>  // 3. Processar pagamento (chamada externa - 2-3s)</p>
<p>  const payment = await stripe.charges.create({...});</p>

<p>  // 4. Atualizar inventÃ¡rio (N queries)</p>
<p>  for (const item of items) {</p>
<p>    await db.query('UPDATE products SET stock = stock - $1 WHERE id = $2', ...);</p>
<p>  }</p>

<p>  return res.json({ orderId: order.id });</p>
<p>}</p>
<p></span>`<span class="kb-inline-code"></p>

<h2>âœ… CRITÃ‰RIOS DE SUCESSO</h2><li>LatÃªncia p95 < 2s</li><li>Zero perda de transaÃ§Ãµes (idempotÃªncia)</li><li>Funciona com carga 2x maior (crescimento planejado)</li>
<p></span>`<span class="kb-inline-code"></p>

<p>---</p>

<h2>AntipadrÃµes de EstruturaÃ§Ã£o</h2>

<h3>ğŸš« AntipadrÃ£o 1: Enterrar InformaÃ§Ã£o CrÃ­tica</h3>

<p><strong>âŒ Problema:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>[10 parÃ¡grafos de contexto]</p>
<p>...</p>
<p>"Ah, e por favor nÃ£o use biblioteca X porque temos restriÃ§Ã£o de licenÃ§a."</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… SoluÃ§Ã£o:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<h2>ğŸš§ CONSTRAINTS (no inÃ­cio)</h2><li>NÃ£o pode usar GPL/AGPL (restriÃ§Ã£o de licenÃ§a)</li>
<p></span>`<span class="kb-inline-code"></p>

<p>---</p>

<h3>ğŸš« AntipadrÃ£o 2: Contexto Desorganizado</h3>

<p><strong>âŒ Problema:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>Usamos Node.js e o sistema tem 10k usuÃ¡rios e estÃ¡ lento</p>
<p>e a query demora 30s e usamos PostgreSQL e nÃ£o podemos</p>
<p>fazer downtime e jÃ¡ tentamos cache...</p>
<p>[parede de texto sem estrutura]</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… SoluÃ§Ã£o:</strong></p>
<p>Use seÃ§Ãµes claras (ğŸ¯ Objetivo, ğŸ› ï¸ Stack, ğŸ“Š Escala, etc)</p>

<p>---</p>

<h3>ğŸš« AntipadrÃ£o 3: InformaÃ§Ã£o ImplÃ­cita</h3>

<p><strong>âŒ Problema:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"O endpoint estÃ¡ lento"</p>
<p>[Assume que IA sabe: qual endpoint? QuÃ£o lento? Por quÃª isso importa?]</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>âœ… SoluÃ§Ã£o:</strong></p>
<p>Explicite tudo:</p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Endpoint POST /api/checkout demora 8s (p95), causando timeouts (limite: 10s).</p>
<p>Impacto: 15% dos checkouts falham = perda de receita."</p>
<p></span>`<span class="kb-inline-code"></p>

<p>---</p>

<h3>ğŸš« AntipadrÃ£o 4: Contexto "Tribal Knowledge"</h3>

<p><strong>âŒ Problema:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"VocÃª sabe, aquele sistema que a gente usa... a tabela grande lÃ¡...</p>
<p>o problema de sempre..."</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>Problema:</strong> IA nÃ£o tem contexto compartilhado com vocÃª.</p>

<p><strong>âœ… SoluÃ§Ã£o:</strong></p>
<p>Trate cada prompt como se fosse para alguÃ©m externo ao projeto.</p>

<p>---</p>

<h2>TÃ©cnicas AvanÃ§adas de EstruturaÃ§Ã£o</h2>

<h3>TÃ©cnica 1: <strong>Contexto em Camadas (Onion Model)</strong></h3>

<p></span>`<span class="kb-inline-code"></p>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>â”‚ NÃšCLEO: Problema + Objetivo      â”‚</p>
<p>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>               â”‚</p>
<p>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>    â”‚ CAMADA 2: Stack + Exemplo â”‚</p>
<p>    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>               â”‚</p>
<p>       â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”</p>
<p>       â”‚ CAMADA 3: Escala â”‚</p>
<p>       â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p>               â”‚</p>
<p>          â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”</p>
<p>          â”‚ CAMADA 4: â”‚</p>
<p>          â”‚ Constraints â”‚</p>
<p>          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>Ordem de leitura:</strong> De dentro pra fora.</p>
<p><strong>BenefÃ­cio:</strong> NÃºcleo sempre visÃ­vel, detalhes opcionais por camada.</p>

<p>---</p>

<h3>TÃ©cnica 2: <strong>Contexto Incremental (Delta)</strong></h3>

<p>Em iteraÃ§Ãµes, nÃ£o repita tudo - adicione apenas o <strong>delta</strong>:</p>

<p><strong>Primeira iteraÃ§Ã£o:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>[Contexto completo CMV]</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>Segunda iteraÃ§Ã£o:</strong></p>
<p></span>`<span class="kb-inline-code"></p>
<p>"Baseado na sua resposta anterior, adicione ao contexto:</p><li>Ãndice em created_at nÃ£o resolveu (ainda 15s)</li><li>Profiling mostra: 80% do tempo em JOIN com users</li><li>Tabela users tem 5M registros</li>

<p>Considerando isso, qual prÃ³xima otimizaÃ§Ã£o?"</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>BenefÃ­cio:</strong> NÃ£o desperdiÃ§a tokens/espaÃ§o, mantÃ©m foco.</p>

<p>---</p>

<h3>TÃ©cnica 3: <strong>Contexto por ReferÃªncia</strong></h3>

<p>Se o contexto Ã© muito grande (logs, cÃ³digo extenso), forneÃ§a por <strong>referÃªncia</strong>:</p>

<p></span>`<span class="kb-inline-code">markdown</p>
<p><strong>CÃ“DIGO:</strong> Ver arquivo </span>api/checkout.js<span class="kb-inline-code"> (linhas 150-200)</p>
<p><strong>LOGS:</strong> Ver anexo </span>error.log<span class="kb-inline-code"> (Ãºltimas 50 linhas)</p>
<p><strong>DIAGRAMA:</strong> Ver </span>architecture.png<span class="kb-inline-code"></p>

<p>Resumo do problema:</p>
<p>[DescriÃ§Ã£o concisa]</p>
<p></span>`<span class="kb-inline-code"></p>

<p><strong>BenefÃ­cio:</strong> Contexto rico sem poluir o prompt principal.</p>

<p>---</p>

<h3>TÃ©cnica 4: <strong>Contexto HierÃ¡rquico (Para Sistemas Complexos)</strong></h3>

<p></span>`<span class="kb-inline-code">markdown</p>
<h2>CONTEXTO GLOBAL (Todo o Sistema)</h2><li>Arquitetura: Microservices (5 serviÃ§os)</li><li>Stack comum: Node.js, PostgreSQL, Redis, RabbitMQ</li><li>Infra: AWS, Kubernetes</li>

<h2>CONTEXTO DO SERVIÃ‡O (Order Service)</h2><li>Responsabilidade: Gerenciar ciclo de vida de pedidos</li><li>APIs: REST (externa) + gRPC (interna)</li><li>Database: PostgreSQL (orders, order_items)</li>

<h2>CONTEXTO DO PROBLEMA (Endpoint especÃ­fico)</h2><li>Endpoint: POST /api/checkout</li><li>FunÃ§Ã£o: </span>checkout()<span class="kb-inline-code"> em </span>src/controllers/order.controller.js<span class="kb-inline-code"></li><li>Issue: Timeout apÃ³s 8s</li>
<p></span>``</p>

<p><strong>BenefÃ­cio:</strong> Clareza de escopo, entendimento de hierarquia.</p>

<p>---</p>

<h2>Checklist de Contexto Bem Estruturado</h2>

<p>Antes de enviar o prompt, valide:</p>

<p>âœ“ <strong>Clareza:</strong></p><li>[ ] Problema estÃ¡ claro em 1-2 linhas?</li><li>[ ] NÃ£o hÃ¡ ambiguidades?</li>

<p>âœ“ <strong>Completude:</strong></p><li>[ ] IncluÃ­ stack tecnolÃ³gico?</li><li>[ ] Dei exemplo concreto (cÃ³digo/dados)?</li><li>[ ] Mencionei critÃ©rios de sucesso?</li>

<p>âœ“ <strong>RelevÃ¢ncia:</strong></p><li>[ ] Toda informaÃ§Ã£o Ã© necessÃ¡ria?</li><li>[ ] NÃ£o hÃ¡ "histÃ³ria" desnecessÃ¡ria?</li><li>[ ] Dados quantitativos quando aplicÃ¡vel?</li>

<p>âœ“ <strong>OrganizaÃ§Ã£o:</strong></p><li>[ ] SeÃ§Ãµes claras?</li><li>[ ] FÃ¡cil de escanear visualmente?</li><li>[ ] InformaÃ§Ã£o mais importante no topo?</li>

<p>âœ“ <strong>Acionabilidade:</strong></p><li>[ ] IA tem dados suficientes para agir?</li><li>[ ] NÃ£o estÃ¡ implÃ­cito ou ambÃ­guo?</li><li>[ ] Constraints estÃ£o explÃ­citas?</li>

<p>---</p>

<h2>PrÃ³ximos Passos</h2>

<p>Domine estruturaÃ§Ã£o de contexto e explore:</p><li><strong>[07-especificacao-requisitos.md]</strong> - Como transformar contexto em specs precisas</li><li><strong>[../2-engineering/01-templates-reutilizaveis.md]</strong> - Capture estruturas de contexto em templates</li><li><strong>[../4-workflows/01-workflow-analise-problemas.md]</strong> - Aplique estruturaÃ§Ã£o em workflows reais</li>

<h2>ğŸŒ± ReflexÃ£o Final</h2>

<p>Estruturar contexto Ã© como <strong>organizar uma mochila para trilha</strong>:</p><li>Leve o essencial (CMV)</li><li>Organize por prioridade (camadas)</li><li>Deixe acessÃ­vel o que usa mais (nÃºcleo no topo)</li><li>SÃ³ leve o extra se a jornada exigir (progressÃ£o)</li>

<p><strong>Comece hoje:</strong></p>
<p>1. Pegue um prompt que vocÃª escreveu recentemente</p>
<p>2. Identifique: qual Ã© o CMV? HÃ¡ ruÃ­do (noise)?</p>
<p>3. Reestruture usando as seÃ§Ãµes deste guia</p>
<p>4. Compare os resultados (antes vs depois)</p>

<p>A diferenÃ§a serÃ¡ notÃ¡vel.</p>

<p>---</p>

<p><strong>Tags:</strong> #contexto #estrutura #signal-noise #CMV #organizacao</p>

<p><strong>Relacionados:</strong></p><li>[[03-contexto-e-role-playing]] - Tipos de contexto (tÃ©cnico, negÃ³cio, etc)</li><li>[[05-ciclo-de-trabalho-com-ia]] - Fase 2 do ciclo (Preparar Contexto)</li><li>[[07-especificacao-requisitos]] - PrÃ³ximo passo natural</li><li>[[../2-engineering/01-templates-reutilizaveis]] - Templates com estruturas prontas</li></ul>

            </main>

            <footer class="kb-footer">
                
                <div class="kb-tags">
                    <span class="kb-tag">#contexto</span>
                    <span class="kb-tag">#estrutura</span>
                    <span class="kb-tag">#signal-noise</span>
                    <span class="kb-tag">#CMV</span>
                    <span class="kb-tag">#organizacao</span>
                </div>
                
            </footer>
        </div>
    </div>

    <script>
        // Initialize Mermaid for diagrams
        mermaid.initialize({
            startOnLoad: true,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#ff0080',
                primaryTextColor: '#fff',
                primaryBorderColor: '#ff0080',
                lineColor: '#ffd700',
                secondaryColor: '#ffd700',
                tertiaryColor: '#0a0a0a'
            }
        });
    </script>
</body>
</html>